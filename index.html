<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>é’“é±¼ä¹±æ–— - iOS Style</title>
    <style>
        :root {
            --ios-blue: #007AFF;
            --ios-green: #34C759;
            --ios-red: #FF3B30;
            --ios-gray: #8E8E93;
            --ios-bg-glass: rgba(30, 30, 30, 0.65);
            --ios-border: rgba(255, 255, 255, 0.15);
            --font-stack: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", Arial, sans-serif;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background-color: #000;
            font-family: var(--font-stack);
            -webkit-font-smoothing: antialiased;
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
        }

        #game-container {
            position: relative; width: 100vw; height: 100vh;
            /* æ›´æ·±é‚ƒã€é«˜çº§çš„æµ·æ´‹æ¸å˜ */
            background: linear-gradient(180deg, #3CA3E8 0%, #1A6BCC 40%, #03256C 100%);
        }

        canvas { display: block; width: 100%; height: 100%; }

        /* --- iOS UI Layer --- */
        #ui-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 10;
            box-sizing: border-box;
            /* é€‚é…åˆ˜æµ·å± */
            padding-top: max(20px, env(safe-area-inset-top));
            padding-left: max(20px, env(safe-area-inset-left));
            padding-right: max(20px, env(safe-area-inset-right));
            display: flex; flex-direction: column;
        }

        /* é¡¶éƒ¨ HUDï¼šèƒ¶å›Šæ ·å¼ */
        .hud-header {
            display: flex; justify-content: space-between; align-items: flex-start;
            width: 100%;
        }

        .glass-pill {
            background: rgba(0, 0, 0, 0.35);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--ios-border);
            padding: 8px 16px;
            border-radius: 30px;
            color: #fff;
            font-size: 15px;
            font-weight: 600;
            display: flex; align-items: center; gap: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .hud-value { font-variant-numeric: tabular-nums; letter-spacing: 0.5px; }
        .highlight { color: #FFD60A; }

        /* å…³å¡æŒ‡ç¤ºå™¨ï¼šå±…ä¸­ */
        .level-badge {
            position: absolute; top: max(70px, calc(env(safe-area-inset-top) + 60px));
            left: 50%; transform: translateX(-50%);
            background: rgba(255,255,255,0.15);
            padding: 4px 12px; border-radius: 12px;
            font-size: 12px; color: rgba(255,255,255,0.8);
            backdrop-filter: blur(10px);
        }

        /* --- å¼¹çª—ä½“ç³» (iOS Alert / Card é£æ ¼) --- */
        .modal-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            display: flex; align-items: center; justify-content: center;
            z-index: 100; pointer-events: auto;
            opacity: 0; transition: opacity 0.3s ease;
            pointer-events: none; /* é»˜è®¤ä¸äº¤äº’ */
        }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }

        .ios-card {
            width: 85%; max-width: 340px;
            background: rgba(35, 35, 35, 0.85);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-radius: 24px;
            padding: 30px 24px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            transform: scale(0.9); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .modal-overlay.active .ios-card { transform: scale(1); }

        .card-icon { font-size: 48px; margin-bottom: 16px; display: block; }
        .card-title {
            margin: 0 0 8px; color: #fff; font-size: 22px; font-weight: 700; letter-spacing: -0.5px;
        }
        .card-subtitle {
            margin: 0 0 24px; color: #AEAEB2; font-size: 15px; line-height: 1.5;
        }
        .highlight-text { color: #fff; font-weight: 600; }

        /* iOS æŒ‰é’® */
        .ios-btn {
            display: block; width: 100%;
            padding: 14px 0; margin-top: 12px;
            border: none; border-radius: 16px;
            font-size: 17px; font-weight: 600;
            cursor: pointer; transition: transform 0.1s, opacity 0.2s;
        }
        .ios-btn:active { transform: scale(0.96); opacity: 0.8; }
        
        .btn-primary { background: var(--ios-blue); color: white; }
        .btn-success { background: var(--ios-green); color: white; }
        .btn-danger { background: var(--ios-red); color: white; }

        .hidden { display: none !important; }

        /* åŠ¨ç”»é£˜å­—ä¼˜åŒ– */
        .effect-text {
            font-family: "SF Pro Rounded", var(--font-stack);
            font-weight: 800;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            pointer-events: none;
        }
    </style>
</head>
<body>

<div id="game-container">
    <canvas id="gameCanvas"></canvas>

    <!-- UI å±‚ -->
    <div id="ui-layer">
        <div class="hud-header">
            <!-- åˆ†æ•°èƒ¶å›Š -->
            <div class="glass-pill">
                <span>ğŸ¯</span>
                <span class="hud-value"><span id="score">0</span> / <span id="target" style="opacity:0.7">1000</span></span>
            </div>
            <!-- æ—¶é—´èƒ¶å›Š -->
            <div class="glass-pill">
                <span>â³</span>
                <span class="hud-value"><span id="time" class="highlight">60</span>s</span>
            </div>
        </div>
        
        <!-- å…³å¡å°æ ‡ç­¾ -->
        <div class="level-badge">
            Level <span id="level-display">1</span> â€¢ Bots: <span id="bot-count">1</span>
        </div>
    </div>

    <!-- 1. å¼€å§‹ç•Œé¢ -->
    <div id="start-screen" class="modal-overlay active">
        <div class="ios-card">
            <span class="card-icon">ğŸ£</span>
            <h1 class="card-title">é’“é±¼ä¹±æ–—</h1>
            <p class="card-subtitle">
                é™¤äº†é±¼ï¼Œæµ·é‡Œè¿˜æœ‰å„ç§å¥‡è‘©å®è—ã€‚<br>
                <span class="highlight-text">ç”µè§†æœº ğŸ“º â€¢ ç«ç‘°èŠ± ğŸŒ¹ â€¢ é’»çŸ³ ğŸ’</span><br><br>
                ç‚¹å‡»å±å¹•å‘å°„é’©çˆª<br>è¶Šè´µçš„ä¸œè¥¿è¶Šéš¾é’“ï¼
            </p>
            <button class="ios-btn btn-primary" onclick="Game.startLevel(1)">å¼€å§‹æŒ‘æˆ˜</button>
        </div>
    </div>

    <!-- 2. å¤±è´¥ç•Œé¢ -->
    <div id="fail-screen" class="modal-overlay">
        <div class="ios-card">
            <span class="card-icon">ğŸ’”</span>
            <h1 class="card-title">æŒ‘æˆ˜å¤±è´¥</h1>
            <p class="card-subtitle">
                é’±æ²¡èµšå¤Ÿï¼Œå›å®¶è¦è·ªæ“è¡£æ¿äº†ã€‚<br>
                æœ¬å±€å¾—åˆ†: <span id="fail-score" class="highlight-text" style="color:#FF3B30; font-size:18px">0</span>
            </p>
            <button class="ios-btn btn-danger" onclick="Game.retryLevel()">å†è¯•ä¸€æ¬¡</button>
        </div>
    </div>
    
    <!-- 3. æˆåŠŸç•Œé¢ -->
    <div id="win-screen" class="modal-overlay">
        <div class="ios-card">
            <span class="card-icon">ğŸ‰</span>
            <h1 class="card-title">é€šå…³æˆåŠŸ</h1>
            <p class="card-subtitle">
                ç®€ç›´æ˜¯æ•é±¼è¾¾äººï¼<br>
                å‡†å¤‡å¥½è¿æ¥æ›´ç–¯ç‹‚çš„ä¸‹ä¸€å…³äº†å—ï¼Ÿ
            </p>
            <button class="ios-btn btn-success" onclick="Game.nextLevel()">ä¸‹ä¸€å…³</button>
        </div>
    </div>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let W, H;
// é€‚é…é«˜DPIå±å¹• (Retina Display)
function resize() {
    const dpr = window.devicePixelRatio || 1;
    // é€»è¾‘å®½é«˜
    W = window.innerWidth;
    H = window.innerHeight;
    // ç‰©ç†åƒç´ å®½é«˜
    canvas.width = W * dpr;
    canvas.height = H * dpr;
    // ç¼©æ”¾ç»˜å›¾ä¸Šä¸‹æ–‡ï¼Œä¿è¯æ–‡å­—æ¸…æ™°
    ctx.scale(dpr, dpr);
}
window.addEventListener('resize', resize);
resize();

// --- ç‰©å“æ•°æ®åº“ ---
const LOOT_POOLS = {
    trash: [
        { emoji: 'ğŸ‘¢', score: 10,  weight: 6.0, speed: 0.5, radius: 22 },
        { emoji: 'ğŸ’©', score: 5,   weight: 6.0, speed: 0.4, radius: 20 },
        { emoji: 'ğŸ§¦', score: 2,   weight: 5.0, speed: 0.6, radius: 18 },
        { emoji: 'ğŸ©²', score: 50,  weight: 5.5, speed: 0.5, radius: 20 },
        { emoji: 'ğŸ§±', score: 1,   weight: 8.0, speed: 0.2, radius: 25 },
    ],
    fish: [
        { emoji: 'ğŸ¡', score: 150, weight: 3.5, speed: 0.8, radius: 30 },
        { emoji: 'ğŸŸ', score: 300, weight: 2.0, speed: 1.8, radius: 22 },
        { emoji: 'ğŸ ', score: 600, weight: 1.0, speed: 2.8, radius: 15 },
        { emoji: 'ğŸ¦‘', score: 400, weight: 1.5, speed: 2.2, radius: 18 },
    ],
    rare: [
        { emoji: 'ğŸ“º', score: 2000, weight: 0.8, speed: 3.5, radius: 25, isRare: true },
        { emoji: 'ğŸŒ¹', score: 5000, weight: 0.1, speed: 5.0, radius: 10, isRare: true },
        { emoji: 'ğŸ‘¦', score: 3000, weight: 1.0, speed: 3.0, radius: 20, isRare: true },
        { emoji: 'ğŸ‘§', score: 3000, weight: 1.0, speed: 3.0, radius: 20, isRare: true },
        { emoji: 'ğŸ’', score: 4000, weight: 0.2, speed: 4.5, radius: 12, isRare: true },
        { emoji: 'ğŸ®', score: 2500, weight: 0.5, speed: 4.0, radius: 15, isRare: true },
        { emoji: 'ğŸ’°', score: 1500, weight: 0.5, speed: 3.8, radius: 15, isRare: true },
    ]
};

const CONFIG = {
    hookSpeed: 14,
    swingSpeed: 0.025,
};

// --- ç±»å®šä¹‰ ---

class Angler {
    constructor(id, totalCount, isPlayer) {
        this.id = id;
        this.isPlayer = isPlayer;
        
        // å¸ƒå±€å‚æ•°
        const rowSize = 5;
        const totalRows = Math.ceil(totalCount / rowSize);
        this.row = Math.floor(id / rowSize);
        
        this.col = id % rowSize;
        this.countInThisRow = (this.row === totalRows - 1) ? (totalCount - (this.row * rowSize)) : rowSize;
        
        // å¢åŠ ä¸€ç‚¹é¡¶éƒ¨åç§»ï¼Œé¿å¼€UI
        this.y = 120 + this.row * 60; 
        this.x = 0; 

        // é¢œè‰²ä¼˜åŒ–ï¼šä½¿ç”¨æ›´æŸ”å’Œçš„è‰²è°ƒ
        this.color = this.isPlayer ? '#FFCC00' : (this.row % 2 === 0 ? '#AAB2BD' : '#656D78');
        
        this.angle = Math.PI/2;
        this.swingDir = Math.random() > 0.5 ? 1 : -1;
        this.state = 0;
        this.lineLen = 20;
        this.maxLen = H * 1.2;
        this.caughtItem = null;
        this.aiTimer = Math.random() * 60 + 20;
    }

    update() {
        // --- å®Œç¾å±…ä¸­é€»è¾‘ ---
        const maxLayoutWidth = Math.min(W, 600); 
        const offsetLeft = (W - maxLayoutWidth) / 2;
        this.x = offsetLeft + (maxLayoutWidth / (this.countInThisRow + 1)) * (this.col + 1);
        // ------------------

        if (this.state === 0) {
            const limit = 0.6;
            if (this.angle > Math.PI - limit) this.swingDir = -1;
            if (this.angle < limit) this.swingDir = 1;
            this.angle += CONFIG.swingSpeed * this.swingDir;
            
            if (!this.isPlayer) {
                this.aiTimer--;
                if (this.aiTimer <= 0) {
                    this.shoot();
                    let diffFactor = Math.max(0, 40 - Game.level * 0.3);
                    this.aiTimer = Math.random() * 80 + diffFactor;
                }
            }
        }
        else if (this.state === 1) {
            this.lineLen += CONFIG.hookSpeed;
            const tx = this.x + Math.cos(this.angle) * this.lineLen;
            const ty = this.y + Math.sin(this.angle) * this.lineLen;
            
            if (this.lineLen >= this.maxLen || tx<0 || tx>W) {
                this.state = 3; this.waitTimer = 15;
            } else {
                for (let item of Game.items) {
                    if (!item.caught && Math.hypot(tx-item.x, ty-item.y) < item.radius + 5) {
                        item.caught = true;
                        this.caughtItem = item;
                        this.state = 2;
                        if(this.isPlayer) {
                            let msg = item.isRare ? "Nice!" : "Gotcha!";
                            Game.addEffect(tx, ty, msg, item.isRare ? "#FFD700" : "#fff");
                        }
                        break;
                    }
                }
            }
        }
        else if (this.state === 3) {
            this.waitTimer--;
            if (this.waitTimer<=0) this.state = 2;
        }
        else if (this.state === 2) {
            let speed = CONFIG.hookSpeed * 1.5;
            if (this.caughtItem) speed = CONFIG.hookSpeed / this.caughtItem.weight;
            
            this.lineLen -= speed;
            if(this.caughtItem) {
                this.caughtItem.x = this.x + Math.cos(this.angle) * this.lineLen;
                this.caughtItem.y = this.y + Math.sin(this.angle) * this.lineLen;
            }
            
            if (this.lineLen <= 20) {
                this.lineLen = 20;
                this.state = 0;
                if (this.caughtItem) {
                    if (this.isPlayer) {
                        Game.score += this.caughtItem.score;
                        let color = this.caughtItem.isRare ? "#FFD60A" : "#FFFFFF";
                        let scale = this.caughtItem.isRare ? 1.5 : 1;
                        Game.addEffect(this.x, this.y-40, `+${this.caughtItem.score}`, color, scale);
                    }
                    Game.items = Game.items.filter(i => i !== this.caughtItem);
                    this.caughtItem = null;
                }
            }
        }
    }

    shoot() { if (this.state === 0) this.state = 1; }

    draw() {
        const tx = this.x + Math.cos(this.angle) * this.lineLen;
        const ty = this.y + Math.sin(this.angle) * this.lineLen;
        
        // é±¼çº¿
        ctx.beginPath(); ctx.moveTo(this.x, this.y); ctx.lineTo(tx, ty);
        ctx.strokeStyle = this.isPlayer ? 'rgba(255, 255, 255, 0.8)' : 'rgba(255, 255, 255, 0.3)';
        ctx.lineWidth = this.isPlayer ? 2 : 1;
        ctx.stroke();
        
        // é’©å­
        ctx.beginPath(); ctx.arc(tx, ty, 5, 0, Math.PI*2);
        ctx.fillStyle = this.isPlayer ? '#FF3B30' : '#8E8E93'; ctx.fill();
        ctx.strokeStyle = '#fff'; ctx.lineWidth = 1; ctx.stroke();
        
        // äººç‰©/æœºå™¨äºº Avatar
        ctx.font = "24px Apple Color Emoji, Segoe UI Emoji"; 
        ctx.textAlign="center"; ctx.textBaseline="middle";
        ctx.fillText(this.isPlayer?"ğŸ¤ ":"ğŸ¤–", this.x, this.y-20);
        
        // ç©å®¶ç®­å¤´æŒ‡ç¤º
        if (this.isPlayer) {
            ctx.fillStyle="#34C759"; ctx.beginPath();
            ctx.moveTo(this.x, this.y-50); ctx.lineTo(this.x-6, this.y-60); ctx.lineTo(this.x+6, this.y-60);
            ctx.fill();
        }
    }
}

class Item {
    constructor() {
        const r = Math.random();
        
        let rareChance = 0.05 + (Game.level * 0.005);
        if (rareChance > 0.6) rareChance = 0.6;
        let trashChance = 0.2;

        let typeData;
        let pool;

        if (r < rareChance) { pool = LOOT_POOLS.rare; } 
        else if (r < rareChance + trashChance) { pool = LOOT_POOLS.trash; } 
        else { pool = LOOT_POOLS.fish; }
        
        typeData = pool[Math.floor(Math.random() * pool.length)];

        Object.assign(this, typeData);
        this.speed *= (1 + Game.level * 0.02); 

        // ç”Ÿæˆä½ç½®ç¨å¾®ä¸‹ç§»ï¼Œé¿å¼€äººç‰©
        const safeTop = 180 + (Math.ceil(Game.totalAnglers/5) * 60);
        this.y = safeTop + Math.random() * (H - safeTop - 80);
        
        this.dir = Math.random() > 0.5 ? 1 : -1;
        this.x = this.dir === 1 ? -40 : W + 40;
        this.caught = false;
    }
    
    update() {
        if (!this.caught) this.x += this.speed * this.dir;
        return (this.dir===1 && this.x<W+50) || (this.dir===-1 && this.x>-50);
    }
    
    draw() {
        ctx.save(); ctx.translate(this.x, this.y);
        if(this.dir===-1 && !this.caught) ctx.scale(-1, 1);
        if(this.caught) ctx.rotate(Math.sin(Game.frameCount*0.3)*0.5);
        
        // é˜´å½±å¢åŠ ç«‹ä½“æ„Ÿ
        ctx.shadowColor = "rgba(0,0,0,0.2)";
        ctx.shadowBlur = 4;
        ctx.shadowOffsetY = 4;
        
        ctx.font = `${this.radius*2}px Apple Color Emoji, Segoe UI Emoji`;
        ctx.textAlign="center"; ctx.textBaseline="middle";
        ctx.fillText(this.emoji, 0, 0);
        
        // ç¨€æœ‰ç‰©å“å…‰æ™•
        if (this.isRare && !this.caught) {
            ctx.shadowColor = "rgba(255, 215, 0, 0.6)";
            ctx.shadowBlur = 15;
            ctx.shadowOffsetY = 0;
            ctx.globalCompositeOperation = 'screen'; 
            ctx.fillText(this.emoji, 0, 0); 
            ctx.globalCompositeOperation = 'source-over';
        }
        
        ctx.restore();
    }
}

// --- æ¸¸æˆä¸»æ§ ---

const Game = {
    level: 1,
    score: 0,
    target: 0,
    timeLeft: 60,
    totalAnglers: 1,
    
    anglers: [],
    items: [],
    effects: [],
    
    isPlaying: false,
    timerId: null,
    loopId: null,
    frameCount: 0,

    getBotCount(lvl) {
        if (lvl <= 10) return Math.floor(1 + (lvl - 1) * (4 / 9));
        else if (lvl <= 50) return Math.floor(5 + (lvl - 10) * (3 / 40));
        else return Math.floor(8 + (lvl - 50) * (12 / 50));
    },

    // è¾…åŠ©å‡½æ•°ï¼šæ˜¾ç¤º/éšè—å¼¹çª—
    showModal(id) {
        document.querySelectorAll('.modal-overlay').forEach(el => el.classList.remove('active'));
        if(id) document.getElementById(id).classList.add('active');
    },

    startLevel(lvl) {
        this.level = lvl;
        this.score = 0;
        this.timeLeft = 60;
        this.target = 1000 + (lvl * 300); 

        let botCount = this.getBotCount(lvl);
        if (botCount > 20) botCount = 20;
        this.totalAnglers = botCount + 1;

        this.showModal(null); // å…³é—­æ‰€æœ‰å¼¹çª—
        
        document.getElementById('level-display').innerText = lvl;
        document.getElementById('bot-count').innerText = botCount;
        
        this.initEntities();
        this.isPlaying = true;
        
        clearInterval(this.timerId);
        this.timerId = setInterval(() => {
            if(!this.isPlaying) return;
            this.timeLeft--;
            
            // æ—¶é—´å°‘äº10ç§’å˜çº¢
            const timeEl = document.getElementById('time');
            timeEl.style.color = this.timeLeft <= 10 ? '#FF3B30' : '#fff';
            
            if (this.timeLeft <= 0) this.checkResult();
        }, 1000);
        
        cancelAnimationFrame(this.loopId);
        this.loop();
    },

    initEntities() {
        this.anglers = [];
        this.items = [];
        this.effects = [];
        let playerIdx = Math.floor(this.totalAnglers / 2);
        for (let i = 0; i < this.totalAnglers; i++) {
            this.anglers.push(new Angler(i, this.totalAnglers, i === playerIdx));
        }
        for(let i=0; i<8; i++) this.items.push(new Item());
    },

    retryLevel() { this.startLevel(this.level); },
    nextLevel() { this.startLevel(this.level + 1); },

    checkResult() {
        this.isPlaying = false;
        clearInterval(this.timerId);
        if (this.score >= this.target) {
            this.showModal('win-screen');
        } else {
            document.getElementById('fail-score').innerText = this.score;
            this.showModal('fail-screen');
        }
    },

    addEffect(x, y, text, color="#fff", scale=1) {
        this.effects.push({x, y, text, color, scale, life: 60});
    },

    loop() {
        if (!this.isPlaying) return;
        ctx.clearRect(0,0,W,H);
        this.frameCount++;

        // Update UI logic
        document.getElementById('score').innerText = this.score;
        document.getElementById('target').innerText = this.target;
        document.getElementById('time').innerText = this.timeLeft;

        let spawnRate = Math.max(8, 60 - (this.totalAnglers * 2)); 
        if (this.frameCount % spawnRate === 0) {
            if (this.items.length < 25) this.items.push(new Item());
        }

        this.items = this.items.filter(i => {
            if (i.caught) return true;
            return i.update();
        });
        this.items.forEach(i => { if(!i.caught) i.draw(); });

        this.anglers.forEach(a => a.update());
        let sortedAnglers = [...this.anglers].sort((a,b) => a.y - b.y);
        sortedAnglers.forEach(a => {
            a.draw();
            if(a.caughtItem) a.caughtItem.draw();
        });

        // ç»˜åˆ¶ç‰¹æ•ˆ
        this.effects = this.effects.filter(e => e.life>0);
        this.effects.forEach(e => {
            e.y -= 1.0; 
            e.life--;
            ctx.save();
            ctx.translate(e.x, e.y);
            // ç®€å•çš„å¼¹è·³ç¼©æ”¾æ•ˆæœ
            let s = e.scale * (1 + Math.sin(e.life * 0.2) * 0.1);
            ctx.scale(s, s);
            ctx.fillStyle = e.color;
            ctx.globalAlpha = Math.min(1, e.life/30);
            ctx.font = "800 28px -apple-system, BlinkMacSystemFont"; // åŠ ç²—å­—ä½“
            
            // æ–‡å­—æè¾¹
            ctx.shadowColor = "rgba(0,0,0,0.5)";
            ctx.shadowBlur = 4;
            ctx.fillText(e.text, 0, 0);
            ctx.restore();
        });

        this.loopId = requestAnimationFrame(() => this.loop());
    }
};

function handleInput(e) {
    if (!Game.isPlaying) return;
    // ä¸é˜»æ­¢ç‚¹å‡»UIæŒ‰é’®
    if (e.target.tagName === 'BUTTON') return;
    e.preventDefault();
    const player = Game.anglers.find(a => a.isPlayer);
    if (player) player.shoot();
}
// ä½¿ç”¨ pointerdown ä»¥è·å¾—æ›´å¿«çš„å“åº”
canvas.addEventListener('pointerdown', handleInput);

</script>
</body>
</html>
